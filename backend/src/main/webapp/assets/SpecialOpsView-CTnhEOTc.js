import{_ as j,r as n,c as u,a as l,b as d,t as a,w as s,v as i,F as A,d as M,o as r,e as J}from"./index-BdSvMJS3.js";const H={class:"special-ops"},X={class:"operation"},Y=["disabled"],Z={key:0,class:"error"},q={key:1,class:"result"},z={class:"operation"},K=["disabled"],G={key:0,class:"error"},Q={key:1,class:"result"},W={class:"operation"},ee=["disabled"],le={key:0,class:"error"},te={key:1,class:"result"},ne={key:2,class:"result"},oe={class:"operation"},ae={class:"form-group"},ue={class:"form-group"},se={class:"form-row"},ie={class:"form-row"},re={class:"form-row"},de=["disabled"],ve={key:0,class:"error"},pe={key:1,class:"result"},ce={__name:"SpecialOpsView",setup(me){const N="http://localhost:8080/api/ticket",C=n(null),L=n(!1),S=n("");async function D(){L.value=!0,S.value="",C.value=null;try{const o=await fetch(`${N}/min-number`);if(!o.ok)throw new Error("Ticket not found or error");C.value=await o.json()}catch(o){S.value=o.message}finally{L.value=!1}}const T=n(""),V=n(null),E=n(!1),c=n("");async function O(){if(!T.value){c.value="Please enter a number";return}E.value=!0,c.value="",V.value=null;try{const o=await fetch(`${N}/count-less-than/${T.value}`);if(!o.ok)throw new Error("Failed to count");V.value=await o.json()}catch(o){c.value=o.message}finally{E.value=!1}}const m=n(""),v=n([]),y=n(!1),p=n("");async function $(){if(!m.value.trim()){p.value="Please enter a prefix";return}y.value=!0,p.value="",v.value=[];try{const o=await fetch(`${N}/by-comment-prefix?prefix=${encodeURIComponent(m.value)}`);if(!o.ok)throw new Error("Failed to search");v.value=await o.json()}catch(o){p.value=o.message}finally{y.value=!1}}const f=n(""),b=n(""),U=n(""),_=n(""),I=n(""),k=n(""),h=n(""),g=n(""),w=n(""),P=n(""),B=n(null),F=n(!1),x=n("");async function R(){if(!f.value||!b.value){x.value="Ticket ID and Price are required";return}F.value=!0,x.value="",B.value=null;try{const o={eyeColor:U.value||null,hairColor:_.value||null,nationality:I.value||null,birthday:k.value?new Date(k.value).toISOString():null,location:{x:h.value?parseInt(h.value):null,y:g.value?parseInt(g.value):0,z:w.value?parseInt(w.value):0,locationName:P.value||null}},e=await fetch(`${N}/sell/${f.value}?price=${b.value}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok){const t=await e.text();throw new Error(t||"Failed to sell ticket")}B.value=await e.json(),f.value="",b.value="",U.value="",_.value="",I.value="",k.value="",h.value="",g.value="",w.value="",P.value=""}catch(o){x.value=o.message}finally{F.value=!1}}return(o,e)=>(r(),u("div",H,[e[22]||(e[22]=l("h1",null,"Special Operations",-1)),l("section",X,[e[13]||(e[13]=l("h2",null,"1. Find Ticket with Minimum Number",-1)),l("button",{onClick:D,disabled:L.value},a(L.value?"Loading...":"Find Min Number"),9,Y),S.value?(r(),u("div",Z,a(S.value),1)):d("",!0),C.value?(r(),u("div",q,[e[12]||(e[12]=l("h3",null,"Result:",-1)),l("pre",null,a(JSON.stringify(C.value,null,2)),1)])):d("",!0)]),l("section",z,[e[14]||(e[14]=l("h2",null,"2. Count Tickets with Number Less Than",-1)),s(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>T.value=t),type:"number",placeholder:"Enter number"},null,512),[[i,T.value]]),l("button",{onClick:O,disabled:E.value},a(E.value?"Loading...":"Count"),9,K),c.value?(r(),u("div",G,a(c.value),1)):d("",!0),V.value!==null?(r(),u("div",Q,[l("h3",null,"Count: "+a(V.value),1)])):d("",!0)]),l("section",W,[e[15]||(e[15]=l("h2",null,"3. Find Tickets by Comment Prefix",-1)),s(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),type:"text",placeholder:"Enter prefix"},null,512),[[i,m.value]]),l("button",{onClick:$,disabled:y.value},a(y.value?"Loading...":"Search"),9,ee),p.value?(r(),u("div",le,a(p.value),1)):d("",!0),v.value.length>0?(r(),u("div",te,[l("h3",null,"Found "+a(v.value.length)+" ticket(s):",1),(r(!0),u(A,null,M(v.value,t=>(r(),u("div",{key:t.id,class:"ticket-item"},[l("strong",null,"ID "+a(t.id)+":",1),J(" "+a(t.name)+" - "+a(t.comment),1)]))),128))])):v.value.length===0&&!y.value&&!p.value&&m.value?(r(),u("div",ne," No tickets found ")):d("",!0)]),l("section",oe,[e[19]||(e[19]=l("h2",null,"4. Sell Ticket",-1)),l("div",ae,[e[16]||(e[16]=l("label",null,"Ticket ID:",-1)),s(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),type:"number",placeholder:"Ticket ID"},null,512),[[i,f.value]])]),l("div",ue,[e[17]||(e[17]=l("label",null,"Price:",-1)),s(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>b.value=t),type:"number",step:"0.01",placeholder:"Sale price"},null,512),[[i,b.value]])]),e[20]||(e[20]=l("h4",null,"Person Details:",-1)),l("div",se,[s(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>U.value=t),type:"text",placeholder:"Eye Color (e.g., BLUE)"},null,512),[[i,U.value]]),s(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>_.value=t),type:"text",placeholder:"Hair Color (e.g., BLACK)"},null,512),[[i,_.value]]),s(l("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>I.value=t),type:"text",placeholder:"Nationality (e.g., RUSSIA)"},null,512),[[i,I.value]])]),l("div",ie,[s(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>k.value=t),type:"date",placeholder:"Birthday"},null,512),[[i,k.value]])]),e[21]||(e[21]=l("h5",null,"Location:",-1)),l("div",re,[s(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>h.value=t),type:"number",placeholder:"X"},null,512),[[i,h.value]]),s(l("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>g.value=t),type:"number",placeholder:"Y"},null,512),[[i,g.value]]),s(l("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>w.value=t),type:"number",placeholder:"Z"},null,512),[[i,w.value]]),s(l("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>P.value=t),type:"text",placeholder:"Location name"},null,512),[[i,P.value]])]),l("button",{onClick:R,disabled:F.value},a(F.value?"Processing...":"Sell Ticket"),9,de),x.value?(r(),u("div",ve,a(x.value),1)):d("",!0),B.value?(r(),u("div",pe,[e[18]||(e[18]=l("h3",null,"Ticket Sold!",-1)),l("pre",null,a(JSON.stringify(B.value,null,2)),1)])):d("",!0)])]))}},fe=j(ce,[["__scopeId","data-v-7803a668"]]);export{fe as default};
